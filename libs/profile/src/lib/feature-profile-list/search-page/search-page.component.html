<app-profile-filters></app-profile-filters>

<div
  class="profile-card__wrapper"
  waIntersectionObserver
  waIntersectionThreshold="0.5">
  @for(profile of profiles().profiles; track $index; let last = $last) {
  <app-profile-card
    [profile]="profile"
    [isSubscribed]="profile.isSubscription ?? false"
    (waIntersectionObservee)="last ? onIntersection($event) : null"
    (chatted)="toChat($event)"
    (subscriptionCreated)="toSubscribe($event)"
    (subscriptionDeleted)="toUnsubscribe($event)">
  </app-profile-card>
  }
</div>

<!-- @if (last) {
  @defer (on viewport) {
    <tt-infinite-scroll-trigger
      (loaded)="timeToFetch()"></tt-infinite-scroll-trigger>
    } @placeholder {
    <div></div>
    }
} -->
