@for (profile of profiles().profiles; track $index; let last = $last) {
  @if (me(); as me) {
    @if (last) {
      <app-profile-card
        [me]="me.id === profile.id ? me : null"
        [profile]="profile"
        [isSubscribed]="profile.isSubscription ?? false"
        (chatted)="toChat($event)"
        (subscriptionCreated)="toSubscribe($event)"
        (subscriptionDeleted)="toUnsubscribe($event)"
        waIntersectionObserver
        waIntersectionThreshold="0.5"
        (waIntersectionObservee)="onIntersection($event)"
        >
      </app-profile-card>
    } @else {
      <app-profile-card
        [me]="me.id === profile.id ? me : null"
        [profile]="profile"
        [isSubscribed]="profile.isSubscription ?? false"
        (chatted)="toChat($event)"
        (subscriptionCreated)="toSubscribe($event)"
        (subscriptionDeleted)="toUnsubscribe($event)">
      </app-profile-card>
    }
  }
}



